# Complete Vicsek Discrete Simulation - All Parameters Explicitly Set
# This config demonstrates every available parameter for the unified backend

# ============================================================================
# MODEL CONFIGURATION
# ============================================================================
model:
  type: vicsek_discrete           # Model backend: "vicsek_discrete" or "vicsek_rk"
  speed: 0.5                      # Particle speed v0 (constant for discrete model)

# ============================================================================
# SIMULATION PARAMETERS
# ============================================================================
sim:
  N: 200                          # Number of particles
  Lx: 20.0                        # Domain width (x-direction)
  Ly: 20.0                        # Domain height (y-direction)
  bc: periodic                    # Boundary condition: "periodic" or "reflecting"
  T: 100.0                        # Total simulation time
  dt: 0.2                         # Time step (must satisfy: v0*dt < 0.5*R)
  save_every: 5                   # Save state every N steps (controls output size)
  neighbor_rebuild: 5             # Rebuild neighbor list every N steps (performance)
  seed: 42                        # Random seed for reproducibility

# ============================================================================
# MODEL-SPECIFIC PARAMETERS
# ============================================================================
params:
  R: 1.0                          # Interaction/alignment radius

# ============================================================================
# NOISE CONFIGURATION
# ============================================================================
noise:
  kind: uniform                   # Noise type: "uniform" or "gaussian"
  eta: 0.5                        # Noise amplitude in radians
                                  # - For uniform: draws from [-eta/2, +eta/2]
                                  # - For gaussian: if match_variance=true, sigma = eta/sqrt(12)
  match_variance: true            # Match Gaussian variance to uniform (only for gaussian)

# ============================================================================
# FORCES (Reserved for future D'Orsogna/Morse integration)
# ============================================================================
forces:
  enabled: false                  # Set to true to enable force-based interactions
  type: morse                     # Force type: "morse", "dorsogna" (not implemented yet)
  params:
    Cr: 2.0                       # Repulsion strength
    Ca: 1.0                       # Attraction strength
    lr: 0.9                       # Repulsion length scale
    la: 1.0                       # Attraction length scale

# ============================================================================
# OUTPUT CONFIGURATION
# ============================================================================
outputs:
  run_name: complete_demo         # Output folder name (null = auto timestamp)
  save_npz: true                  # Save results.npz with trajectories
  save_csv: true                  # Save metrics.csv with time series
  plots: true                     # Generate static plots
  animate: true                   # Generate animations
  
  # Trajectory animation settings
  traj_anim:
    fps: 30                       # Frames per second
    dpi: 120                      # Image resolution
    quiver_scale: speed           # Arrow scaling: "speed" or numeric value
    
  # Density animation settings  
  density_anim:
    fps: 30                       # Frames per second
    dpi: 120                      # Image resolution
    
  # Density grid/KDE settings
  grid_density:
    enabled: true                 # Generate density heatmap
    nx: 128                       # Grid cells in x-direction
    ny: 128                       # Grid cells in y-direction
    bandwidth: 0.5                # KDE bandwidth (smoothing)
    
  # Plot styling options
  plot_options:
    traj_marker_size: 15          # Particle marker size in plots
    traj_quiver: true             # Show velocity arrows
    traj_quiver_scale: 2.5        # Arrow length scaling
    traj_quiver_width: 0.004      # Arrow line width
    traj_quiver_alpha: 0.8        # Arrow transparency (0-1)

# ============================================================================
# PARAMETER NOTES
# ============================================================================
# 
# VALIDATION CONSTRAINTS:
# - v0 * dt <= 0.5 * R  (prevents jumping over neighborhood)
# - For this config: 0.5 * 0.2 = 0.1 <= 0.5 * 1.0 = 0.5 âœ“
#
# DENSITY:
# - rho = N / (Lx * Ly) = 200 / (20 * 20) = 0.5 particles per unit area
# - Neighborhood area: pi * R^2 = 3.14
# - Expected neighbors: ~1.6 particles (sparse, good for testing)
#
# NOISE REGIMES:
# - eta < 0.1:  Strong alignment (ordered phase)
# - eta ~ 1.5:  Near phase transition (critical)
# - eta > 2.5:  Strong disorder (disordered phase)
# - Current: eta = 0.5 (moderately ordered)
#
# OUTPUT SIZE:
# - Total steps: T/dt = 100/0.2 = 500 steps
# - Saved frames: 500/5 + 1 = 101 frames
# - Array size: (101, 200, 2) = ~323 KB per array
# - Total output: ~1-2 MB
