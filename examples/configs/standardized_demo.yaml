# Complete Vicsek Discrete Simulation - Standardized Outputs
# This config demonstrates the new unified output system

# ============================================================================
# MODEL CONFIGURATION
# ============================================================================
model:
  type: vicsek_discrete           # Model backend: "vicsek_discrete" or "vicsek_rk"
  speed: 0.5                      # Particle speed v0 (constant for discrete model)

# ============================================================================
# SIMULATION PARAMETERS
# ============================================================================
sim:
  N: 200                          # Number of particles
  Lx: 20.0                        # Domain width (x-direction)
  Ly: 20.0                        # Domain height (y-direction)
  bc: periodic                    # Boundary condition: "periodic" or "reflecting"
  T: 100.0                        # Total simulation time
  dt: 0.2                         # Time step (must satisfy: v0*dt < 0.5*R)
  save_every: 5                   # Save state every N steps (controls output size)
  neighbor_rebuild: 5             # Rebuild neighbor list every N steps (performance)
  seed: 42                        # Random seed for reproducibility

# ============================================================================
# MODEL-SPECIFIC PARAMETERS
# ============================================================================
params:
  R: 1.0                          # Interaction/alignment radius

# ============================================================================
# NOISE CONFIGURATION
# ============================================================================
noise:
  kind: uniform                   # Noise type: "uniform" or "gaussian"
  eta: 0.5                        # Noise amplitude in radians
  match_variance: true            # Match Gaussian variance to uniform (only for gaussian)

# ============================================================================
# FORCES (Reserved for future D'Orsogna/Morse integration)
# ============================================================================
forces:
  enabled: false                  # Set to true to enable force-based interactions
  type: morse                     # Force type: "morse", "dorsogna" (not implemented yet)
  params:
    Cr: 2.0                       # Repulsion strength
    Ca: 1.0                       # Attraction strength
    lr: 0.9                       # Repulsion length scale
    la: 1.0                       # Attraction length scale

# ============================================================================
# STANDARDIZED OUTPUT CONFIGURATION
# ============================================================================
outputs:
  run_name: standardized_demo     # Output folder name (null = auto timestamp)
  
  # Core data outputs
  save_npz: true                  # Save results.npz with trajectories (positions, velocities)
  
  # Order parameter analysis
  order_parameters: true          # Compute and save all order parameters
                                  # Generates: order_parameters.csv, order_summary.png
                                  # Metrics computed:
                                  #   - Polarization Φ(t)
                                  #   - Angular momentum L(t)  
                                  #   - Mean speed ⟨|v|⟩(t)
                                  #   - Density variance Var(ρ)(t)
  
  # CSV data exports
  save_csv: true                  # Save detailed CSV files
                                  # Generates: traj.csv, density.csv
                                  # WARNING: Can produce large files for long simulations
  
  # Animations (requires ffmpeg to be installed)
  animations: true                # Create MP4 animations (default: true)
                                  # Generates: traj_animation.mp4, density_animation.mp4
                                  # If ffmpeg is not available, prints instructions
                                  # Set to false to skip animation attempts
  fps: 20                         # Animation frame rate (frames per second)
  
  # Density field settings
  density_resolution: 100         # Grid resolution for KDE density calculation
                                  # Higher = more detailed but slower computation
                                  # Typical range: 50-200

# ============================================================================
# PARAMETER NOTES
# ============================================================================
# 
# VALIDATION CONSTRAINTS:
# - v0 * dt <= 0.5 * R  (prevents jumping over neighborhood)
# - For this config: 0.5 * 0.2 = 0.1 <= 0.5 * 1.0 = 0.5 ✓
#
# DENSITY:
# - rho = N / (Lx * Ly) = 200 / (20 * 20) = 0.5 particles per unit area
# - Neighborhood area: pi * R^2 = 3.14
# - Expected neighbors: ~1.6 particles (sparse, good for testing)
#
# NOISE REGIMES:
# - eta < 0.1:  Strong alignment (ordered phase)
# - eta ~ 1.5:  Near phase transition (critical)
# - eta > 2.5:  Strong disorder (disordered phase)
# - Current: eta = 0.5 (moderately ordered)
#
# OUTPUT FILES GENERATED:
# - results.npz              : Trajectory data (positions, velocities, times)
# - order_parameters.csv     : Time series of all order parameters
# - order_summary.png        : 4-panel plot of order parameters
# - traj.csv                 : Per-particle trajectory data (if save_csv=true)
# - density.csv              : KDE density field data (if save_csv=true)
# - traj_animation.mp4       : Particle animation with velocity arrows (if animations=true)
# - density_animation.mp4    : Density field animation (if animations=true)
#
# OUTPUT SIZE ESTIMATES:
# - Total steps: T/dt = 100/0.2 = 500 steps
# - Saved frames: 500/5 + 1 = 101 frames
# - results.npz: ~400 KB
# - order_parameters.csv: ~10 KB
# - traj.csv: ~3 MB (101 frames × 200 particles × 6 columns)
# - density.csv: ~40 MB (101 frames × 100×100 grid × 4 columns)
# - Animations: ~1-5 MB each depending on compression
# Total: ~50-100 MB with all outputs enabled
