# D'Orsogna Model with Morse Forces
# 
# This configuration uses the continuous force-based model (dynamics.py)
# with Morse potential forces (repulsion + attraction) and optional Vicsek alignment.
#
# Physical interpretation:
# - Morse forces create short-range repulsion and long-range attraction
# - Cr, Ca control force magnitudes (repulsion, attraction)
# - lr, la control length scales (repulsion shorter than attraction)
# - Vicsek alignment (optional) adds velocity alignment within radius

seed: 42

model:
  type: dorsogna  # Continuous force-based model

sim:
  N: 200                    # Number of particles
  T: 100.0                  # Simulation time
  dt: 0.01                  # Time step (small for stability with forces)
  Lx: 20.0                  # Domain width
  Ly: 20.0                  # Domain height
  bc: periodic              # Boundary condition: periodic or reflecting
  save_every: 50            # Save every N steps (100 frames total)
  neighbor_rebuild: 10      # Rebuild neighbor list every N steps
  integrator: rk4           # rk4 (4th order) or euler_semiimplicit (2nd order)

params:
  # Self-propulsion and damping
  alpha: 2.0                # Self-propulsion magnitude (speed drive)
  beta: 1.0                 # Friction coefficient (damping)
  # Resulting natural speed: v0 = α/β = 2.0
  
  # Morse force parameters
  Cr: 2.0                   # Repulsive strength
  Ca: 1.0                   # Attractive strength
  lr: 0.5                   # Repulsive length scale (short-range)
  la: 1.5                   # Attractive length scale (long-range)
  rcut_factor: 5.0          # Cutoff = rcut_factor × max(lr, la)
  # Effective cutoff: 5.0 × 1.5 = 7.5
  
  # Optional Vicsek alignment (set enabled: false to disable)
  alignment:
    enabled: true           # Enable Vicsek-style alignment
    radius: 1.5             # Alignment interaction radius
    rate: 1.0               # Alignment rate μ_r
    Dtheta: 0.1             # Rotational diffusion D_θ

outputs:
  save_dir: outputs/dorsogna_morse
  
  # CSV outputs
  save_csv: true            # Save order parameters and trajectories as CSV
  
  # Plots
  save_plots: true          # Generate PNG plots
  
  # Animations (requires ffmpeg)
  animations: true          # Generate MP4 videos
  fps: 20                   # Frames per second
  density_resolution: 50    # KDE grid resolution
  
  # Order parameters to compute
  order_parameters:
    - polarization          # Φ: velocity alignment [0,1]
    - angular_momentum      # L: collective rotation
    - mean_speed            # ⟨|v|⟩: average particle speed
    - density_variance      # Var(ρ): spatial clustering
