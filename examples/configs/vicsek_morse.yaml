# Vicsek Model with Morse Potential Forces
# Combines alignment (Vicsek) with attractive/repulsive forces (Morse)

model:
  type: vicsek_discrete
  speed: 1.0                      # Moderate speed

sim:
  N: 200                          # Moderate particle count
  Lx: 25.0
  Ly: 25.0
  bc: periodic                    # Periodic boundaries for cleaner dynamics
  T: 100.0                        # 100 time units
  dt: 0.1                         # Small timestep for force integration
  save_every: 5                   # Save every 5 steps (201 frames)
  neighbor_rebuild: 3             # Rebuild frequently (forces change quickly)
  seed: 456

params:
  R: 2.0                          # Larger alignment radius

noise:
  kind: uniform
  eta: 0.3                        # Moderate noise (allow patterns to form)
  match_variance: true

forces:
  enabled: true                   # ENABLE MORSE FORCES!
  type: morse                     # Morse potential
  params:
    Cr: 2.0                       # Repulsion strength (short-range)
    Ca: 1.0                       # Attraction strength (long-range)
    lr: 0.5                       # Repulsion length scale (particles avoid getting too close)
    la: 1.5                       # Attraction length scale (particles pulled together from distance)

outputs:
  run_name: vicsek_morse
  save_npz: true
  order_parameters: true
  save_csv: false
  animations: true
  fps: 20
  density_resolution: 100

# FORCE DYNAMICS NOTES:
# ====================
# Morse potential: F = Cr*exp(-r/lr) - Ca*exp(-r/la)
# 
# At very short distances (r << lr):
#   - Repulsion DOMINATES â†’ particles push apart
#   - Prevents overlap and clustering
# 
# At intermediate distances (lr < r < la):
#   - Attraction and repulsion balance
#   - Preferred spacing emerges
# 
# At long distances (r >> la):
#   - Both forces decay to zero
#   - Pure Vicsek alignment
#
# With Cr=2.0, Ca=1.0, lr=0.5, la=1.5:
#   - Strong short-range repulsion
#   - Moderate long-range attraction
#   - Expect: Regular spacing, cohesive flocks, potential pattern formation
#
# Expected behavior:
#   - Particles self-organize into regularly-spaced structures
#   - Stronger cohesion than pure Vicsek
#   - Possible formation of "living crystals" or flocking bands
#   - Angular momentum may develop from force imbalances
#   - Density variance should show structured patterns
