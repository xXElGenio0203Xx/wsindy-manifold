# Unified Configuration: Continuous D'Orsogna Model with Alignment
# 
# This demonstrates the standardized configuration format for continuous-time
# D'Orsogna dynamics with RK4 integration and optional Vicsek alignment.

# ==============================================================================
# DOMAIN CONFIGURATION
# ==============================================================================
domain:
  Lx: 20.0                        # Domain width
  Ly: 20.0                        # Domain height
  bc: periodic                    # Boundary conditions: "periodic" or "reflecting"

# ==============================================================================
# PARTICLE INITIALIZATION
# ==============================================================================
particles:
  N: 100                          # Number of particles
  initial_distribution: two_clusters  # Options: "uniform", "gaussian_cluster", "two_clusters", "ring"
  initial_speed: 1.5              # Initial speed (will relax to alpha/beta)
  velocity_distribution: random   # Options: "random", "aligned", "counter_rotating"

# ==============================================================================
# MODEL TYPE
# ==============================================================================
model:
  type: continuous                # "discrete" (Vicsek discrete-time) or "continuous" (D'Orsogna ODE)

# ==============================================================================
# DYNAMICS PARAMETERS
# ==============================================================================
dynamics:
  # Alignment (Vicsek-style coordination)
  alignment:
    enabled: true                 # Enable alignment interactions
    radius: 2.0                   # Alignment interaction radius
    rate: 1.0                     # Rotational mobility μ_r
  
  # Forces (Morse potential, always active in continuous model)
  forces:
    enabled: true                 # Forces are intrinsic to D'Orsogna
    Cr: 2.0                       # Repulsion strength
    Ca: 1.0                       # Attraction strength
    lr: 0.5                       # Repulsion length scale (short-range)
    la: 1.5                       # Attraction length scale (long-range)
    rcut_factor: 5.0              # Force cutoff radius = rcut_factor * max(lr, la)
    mu_t: 0.5                     # (Not used in continuous, kept for consistency)
  
  # Noise (rotational diffusion)
  noise:
    type: gaussian                # "gaussian" (recommended for continuous)
    eta: 0.1                      # Noise strength (not directly used in continuous)
    match_variance: true          # (Not used in continuous)
    Dtheta: 0.001                 # Rotational diffusion coefficient
  
  # Self-propulsion (D'Orsogna self-propulsion term)
  self_propulsion:
    alpha: 1.5                    # Self-propulsion magnitude
    beta: 1.0                     # Friction coefficient
    # Natural speed: v₀ = alpha/beta = 1.5

# ==============================================================================
# INTEGRATION PARAMETERS
# ==============================================================================
integration:
  T: 100.0                        # Total simulation time
  dt: 0.01                        # Time step
  save_every: 50                  # Save every N steps (RK4 is expensive)
  neighbor_rebuild: 10            # Rebuild neighbor lists every N steps
  integrator: rk4                 # "euler" (semi-implicit) or "rk4" (recommended)
  seed: 42                        # Random seed for reproducibility

# ==============================================================================
# OUTPUT CONFIGURATION
# ==============================================================================
outputs:
  directory: outputs/continuous_two_clusters  # Output directory
  
  # What to compute and save
  order_parameters: true          # Compute all 4 order parameters (always)
  animations: true                # Create MP4 animations
  save_csv: true                  # Save CSV data files
  
  # Animation settings
  fps: 20                         # Frames per second for videos
  density_resolution: 50          # Grid resolution for density field
  
  # Arrow visualization in trajectory animation
  arrows:
    enabled: true                 # Show velocity arrows (default: true)
    scale: speed                  # "speed" (proportional to speed) or "uniform" (fixed length)
    scale_factor: 1.0             # Scaling factor for arrow sizes
