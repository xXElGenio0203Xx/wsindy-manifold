# D'Orsogna with Vicsek Alignment - Low Speed
# 
# This combines:
# - Morse forces (repulsion + attraction)
# - Vicsek alignment (velocity coordination)
# - Low self-propulsion speed
#
# Expected behavior: Cohesive flocks with regular spacing

seed: 42

model:
  type: dorsogna

sim:
  N: 50                     # 50 particles
  T: 30.0                   # Longer run to see flocking
  dt: 0.05                  # Time step
  Lx: 15.0                  # Larger domain to see migration
  Ly: 15.0
  bc: periodic
  save_every: 10            # 60 frames
  neighbor_rebuild: 5
  integrator: euler_semiimplicit

params:
  # Low self-propulsion speed
  alpha: 0.5                # Reduced from 1.0
  beta: 1.0                 # v0 = α/β = 0.5 (half speed)
  mu_t: 1.0
  
  # Morse forces (balanced)
  Cr: 1.5                   # Stronger repulsion for spacing
  Ca: 1.0                   # Moderate attraction for cohesion
  lr: 0.4                   # Repulsion range
  la: 1.2                   # Attraction range
  rcut_factor: 4.0
  
  # Vicsek alignment ENABLED
  alignment:
    enabled: true           # Turn on alignment!
    radius: 2.0             # Large radius for coordination
    rate: 2.0               # Strong alignment rate
    Dtheta: 0.05            # Low noise for coherent motion

outputs:
  save_dir: outputs/dorsogna_low_speed_aligned
  save_csv: true
  save_plots: true
  animations: true
  fps: 15
  density_resolution: 40
  order_parameters:
    - polarization
    - angular_momentum
    - mean_speed
    - density_variance
