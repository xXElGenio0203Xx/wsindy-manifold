# Quick Test Configuration for Debugging ROM/MVAR Pipeline
# 
# This is a minimal test config with only 2 ensemble runs for fast iteration
# Use this for debugging, then switch to vicsek_morse_base.yaml for production

# Use discrete-time Vicsek model with forces enabled
model: vicsek_discrete

# Simulation domain and time
sim:
  N: 200
  Lx: 20.0
  Ly: 20.0
  bc: periodic
  T: 100.0                  # Shorter time for faster testing
  dt: 0.1
  save_every: 10            # 1000 snapshots
  integrator: euler_semiimplicit
  neighbor_rebuild: 1

# Model configuration
model_config:
  speed: 0.5
  speed_mode: variable

# Alignment parameters
params:
  R: 2.0

# Noise configuration
noise:
  kind: gaussian
  eta: 0.3
  match_variance: true

# Morse force configuration
forces:
  enabled: true
  type: morse
  params:
    Cr: 0.5
    Ca: 1.0
    lr: 0.5
    la: 1.0
    rcut_factor: 3.0
    mu_t: 0.5

# Seed and IC
seed: 42
initial_distribution: uniform

# Ensemble settings (SMALL FOR TESTING)
ensemble:
  n_runs: 2                 # Only 2 runs for quick testing
  seeds: null
  base_seed: 0
  ic_types:
    - uniform
    - gaussian
  ic_weights: null

# Output settings
out_dir: simulations/vicsek_morse_test

outputs:
  save_npz: true
  save_csv: true
  plots: false
  animate_traj: false
  animate_density: false
  video_ics: 0
  plot_order_params: false
  order_params_ics: 0
  
  # Density grid for POD
  grid_density:
    enabled: true
    nx: 64
    ny: 64
    bandwidth: 0.5
  
  efrom:
    auto_run: false

# ROM/MVAR PIPELINE SETTINGS (SMALL FOR TESTING)
rom:
  experiment_name: vicsek_morse_test
  rom_root: rom_mvar
  
  # Training settings
  num_train_ics: 2          # Must match ensemble.n_runs
  train_seeds: null
  
  # POD settings
  energy_threshold: 0.995
  latent_dim: null
  
  # MVAR settings
  mvar_order: 4
  ridge: 1.0e-6
  train_frac: 1.0
  
  # Evaluation settings
  eval:
    num_test_ics: 1         # Only 1 test IC for speed
    test_seeds: null
    forecast_horizon: null
    error_tolerance: 0.1
    error_metric: rmse
    generate_videos: false  # Videos generated locally after rsync
    generate_plots: true    # Plots are lightweight, generate on Oscar
